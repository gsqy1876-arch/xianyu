# 闲鱼自动回复系统 Docker Compose 配置
# 用于 Ubuntu Server 部署

services:
  xianyu-app:
    build: .
    container_name: xianyu-app
    restart: always
    
    # 环境变量
    environment:
      - PYTHONUNBUFFERED=1
      - TZ=Asia/Shanghai
    
    # 持久化卷挂载
    volumes:
      # 配置文件挂载（修改后无需重建镜像）
      - ./global_config.yml:/app/global_config.yml:ro
      # 日志持久化
      - ./logs:/app/logs
      # 环境变量文件（可选）
      - ./.env:/app/.env:ro
    
    # 日志配置
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    
    # 资源限制（可选，根据服务器配置调整）
    # deploy:
    #   resources:
    #     limits:
    #       memory: 1G
    #     reservations:
    #       memory: 512M
